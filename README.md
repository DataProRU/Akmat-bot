### Сторонние библиотеки:
pip install aiohttp  
pip install aiogram  
pip install python-dotenv  
pip install fastapi  
pip install uvicorn  

### Как пользоваться:
#### Контейнер:
1. ```docker build -t tg_Axmat_bot .```
2. ```docker run -d -p 8001:8001 --name tg_Axmat_bot tg_Axmat_bot```

#### Локалка:
1. Установить библиотеки из списка (с версиями можно ознакомиться в [requirements.txt](./requirements.txt))
2. Запустить проект (командой python main.py или любым другим удобным способом), запуск серверной части и бота происходит в main

#### Общее:
Создать файл ```.env``` по примеру из [```.env.example```](./.env.example).

**ВАЖНО!!!**  
BASE_URL должел быть https и в конце ссылки содержать /, так как внутри бота к ней прибавляются эндпоинты (в файле [/app/config.py](./app/config.py)). При тесте на локалке можно использовать ngrok, телега не пропускает незащищенные ссылки в миниап.


### Общая инфа о работе бота и сервера

**Бот** — отвечает за взаимодействие с пользователями через Telegram, обработку команд и отправку сообщений.  
**Сервер** — предоставляет API для работы с внешними системами (например, принятие данных в бэка сайта)

#### [Бот](./app/)

##### Файлы:
Корень проекта:
* [bot.py](./app/bot.py) — конфигурация бота.
* [config.py](./app/config.py) — настройка переменных окружения и основных эндпоинтов.
* [handlers.py](./app/handlers.py) — обработка команд и взаимодействие с пользователями.

Утилиты:
* [utils/utils.py](./app/utils/utils.py) - общие утилиты.
* [utils/token_utils.py](./app/utils/token_utils.py) - утилиты по токену (генерация токена, общей информации о пользователе и тп).
* [utils/ui_utils.py](./app/utils/ui_utils.py) - утилиты связанные с ui бота (создание разметки с миниап кнопками).

Тинькофф:
* [tinkoff/utils.py](./app/tinkoff/utils.py) — утилиты для работы с тиньком (рассылка сообщений об успешной автозагрузке).


#### [Сервер](./server/)

##### Файлы:
* [models.py](./server/models.py) - модели для работы сервера.
* [routes/tinkoff.py](./server/routes/tinkoff.py) - роутер для связи тинька.